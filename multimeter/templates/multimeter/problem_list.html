{% extends "multimeter/menu.html" %}
{% block content %}
	<div class="container">
		<div class="row">
			<div class="col">
				<h1>{% block title %}Список задач{% endblock %}</h1>
				{% if object_list %}
					<table class="table table-hover">
						<thead>
							<tr>
								<th>Название</th>
								<th>Автор</th>
								<th></th>
							</tr>
						</thead>
						<tbody>
						{% for problem in object_list %}
							<tr data-url="{% url 'problem_update' problem.id %}">
								<td>{{ problem.name }}</td>
								<td>{{ problem.author }}</td>
								<td class="text-right">
									<a href="{% url 'problem_delete' problem.id %}" class="btn btn-danger" role="button">
										<i class="fas fa-trash-alt"></i>
									</a>
								</td>
							</tr>
						{% endfor %}
						</tbody>
					</table>
				{% else %}
					<p>Ни одна задаче ещё не создана</p>
				{% endif %}
				<a href="{% url 'problem_create' %}" class="btn btn-primary">Создать</a>
                <a href="{% url 'problem_import' %}" class="btn btn-primary">Импорт</a>
			</div>
		</div>
	</div>
{% endblock %}
{% block scripts %}
	<script>
		$(function () {
			$('table tbody tr').on('click', function(event) {
				window.location.href = $(this).data('url');
			});
		});
	</script>
{% endblock %}